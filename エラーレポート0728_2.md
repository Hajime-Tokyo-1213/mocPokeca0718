# エラーレポート - スプレッドシートデータ表示問題
作成日: 2025-07-28

## 概要
ウェブアプリケーションでスプレッドシートの一部データが表示されない問題について調査を実施。
特に「ガルーラ AR SV10 110/098」が検索できない問題を確認。

## 調査結果

### 1. データ件数の比較
- **スプレッドシート内のデータ件数**: 663件（ヘッダー行を除く）
- **ウェブアプリで取得可能なデータ件数**: 663件（全データ取得は正常）

### 2. 問題の原因
「ガルーラ AR SV10 110/098」が表示されない原因は、**検索ロジックの不一致**にあります。

#### スプレッドシートのデータ構造:
```csv
"商品タイトル","型番","AR","買取価格"
"ガルーラ AR SV10 110/098","110/098","AR","200"
```

#### 問題点:
1. スプレッドシートの「型番」フィールドには「110/098」のみが格納されている
2. ウェブアプリの検索機能（home-client.tsx:29-31）は「商品型番」フィールドで前方一致検索を実行
3. ユーザーが「SV10」で検索すると、型番「110/098」とマッチしないため表示されない

### 3. 詳細分析
現在の検索ロジック:
```typescript
return allCards.filter(card =>
  card && typeof card.商品型番 === 'string' && card.商品型番.startsWith(searchValue)
)
```

このロジックでは:
- 「110」で検索 → ✓ 表示される
- 「SV10」で検索 → ✗ 表示されない
- 「ガルーラ」で検索 → ✗ 表示されない（商品タイトルは検索対象外）

## 推奨される修正案

### 案1: 検索対象フィールドの拡張
商品タイトルと商品型番の両方を検索対象にする:
```typescript
return allCards.filter(card =>
  card && (
    (typeof card.商品型番 === 'string' && card.商品型番.includes(searchValue)) ||
    (typeof card.商品タイトル === 'string' && card.商品タイトル.includes(searchValue))
  )
)
```

### 案2: スプレッドシートのデータ構造変更
型番フィールドに完全な型番情報（例: "SV10 110/098"）を格納する。

### 案3: 商品タイトルからの型番抽出
商品タイトル「ガルーラ AR SV10 110/098」から型番部分「SV10 110/098」を抽出して検索に使用する。

## 結論
データの取得自体は正常に動作しており、全663件のデータが正しく取得されています。
問題は検索ロジックにあり、ユーザーの期待する検索方法（商品名やシリーズ番号での検索）と実際の実装が一致していないことが原因です。